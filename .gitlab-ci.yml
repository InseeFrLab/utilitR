variables:
  GIT_SSL_NO_VERIFY: "1"

before_script:
    - Rscript -e "install.packages(c('RcppEigen', 'FactoMineR','factoextra', 'corrplot'))"

pages:
  stage: deploy
  image: git-registry.stable.innovation.insee.eu/innovation/rstudio
  script:
    - Rscript -e "bookdown::render_book('./index.Rmd', output_dir = 'public')"
  artifacts:
    paths:
      - public
  only:
    - master


buildbookdown:
  stage: deploy
  image: git-registry.stable.innovation.insee.eu/innovation/rstudio
  script:
  - Rscript -e "bookdown::render_book('./supports/bookdown/index.Rmd', output_dir = 'public')"
  artifacts:
    paths:
      - public
    when: always
