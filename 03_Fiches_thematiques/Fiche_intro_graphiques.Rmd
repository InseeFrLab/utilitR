# Introduction aux graphiques en `R`

## Tâches concernées et recommandations

L'utilisateur souhaite réaliser des graphiques (nuages de points, histogrammes, densité...) et les personnaliser (légendes, titres, échelles...).

::: {.recommandation data-latex=""}

* Il est recommandé d'utiliser le *package* `ggplot2` qui permet de réaliser et de personnaliser un grand nombre de représentations graphiques;
* Il est conseillé aux utilisateurs débutants d'utiliser l'*add-in* `esquisse` pour se familiariser avec `ggplot2` + EVENTUELLEMENT GGFORMULA, POINT A REDISCUTER.
:::

## L'add-in `esquisse`

`esquisse` est un package développé notamment par [Victor Perrier](https://twitter.com/_pvictorr) de [dreamRs](https://www.dreamrs.fr/) et qui fournit une interface graphique pour la construction de graphiques avec `ggplot2`.

Pour l'utiliser, il faut évidemment préalablement installer l'extension :

```{r eval = FALSE}
install.packages("esquisse")
```

Pour lancer l'interface, ouvrez le menu *Addins* dans la barre d'outils de RStudio, et cliquez sur *'ggplot2' builder*^[Vous pouvez aussi lancer la commande `esquisser::esquisse()` dans la Console.].

![](./pics/intro_graphiques/esquisse_addin_menu.png)

Une fenêtre s'ouvre : la première étape consiste à choisir un *data frame* de votre environnement, et éventuellement à ne sélectionner que certaines de ses variables.

![Choix d'un data frame](./pics/intro_graphiques/esquisse_choose_dataset.png)
Une fois le choix effectué, cliquez sur *Validate imported data*.

L'interface principale s'affiche alors. La liste des variables du *data frame* apparaît en haut, et vous pouvez les faire glisser dans les zones *X*, *Y*, *Fill*, *Color*, *Size* et *Facet* pour créer des mappages. Le graphique se met automatiquement à jour.


![](./pics/intro_graphiques/esquisse_plot.png)

Par défaut, `esquisse` sélectionne le type de graphique le plus approprié selon la nature de vos variables. Mais vous pouvez choisir un autre type de graphique à l'aide de l'icône en haut à gauche.

Enfin, une série de menus en bas de l'interface vous permettent de personnaliser les titres, les labels, la présentation ou de filtrer des valeurs de vos variables.

Quand vous avez généré un graphique que vous souhaitez conserver, ouvrez le menu *Export & code* :

![](./pics/intro_graphiques/esquisse_export.png)

Vous y trouverez le code R correspondant au graphique actuellement affiché. Vous pouvez dès lors le copier pour le coller dans votre script, ou cliquer sur *Insert code in script* pour l'insérer directement dans votre script à l'endroit où se trouve votre curseur.

`esquisse` ne propose pas (encore) tous les `geom` ou toutes les possibilités de `ggplot2`, mais ça peut être un outil très utile et pratique pour une exploration rapide de données ou lorsqu'on est un peu perdu dans la syntaxe et les fonctions de l'extension.

Pour plus d'informations, vous pouvez vous référer à la [page du projet sur GitHub](https://github.com/dreamRs/esquisse) (en anglais).

## Eventuellement: `ggformula`

A COMPLETER LE CAS ECHEANT

## Eventuellement: les `plots` de `base R`

A COMPLETER LE CAS ECHEANT

## Sources

Cette fiche reprend et adapte des éléments issus des source suivantes:

- [Partie `ggplot2`](https://juba.github.io/tidyverse/08-ggplot2.html) de l'introduction à `R` et au `tidyverse`.
